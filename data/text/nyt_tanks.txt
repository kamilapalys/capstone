With the precision of a military drill, first Germany and then the United States announced on Wednesday that each had agreed to provide battle tanks to help Ukraine beat back Russia’s invading forces.

In reaching a deal, the two countries extricated themselves from a diplomatic morass that had consumed the attention of Western officials for weeks and exposed divisions between Ukraine’s allies.

Ukrainian leaders, with an eye on the tough battles widely assumed to lie ahead in the spring, had urged Germany to send its vaunted tank, the Leopard 2. Berlin resisted.

Germany made clear it would proceed only if the United States sent its own powerful tank, the M1 Abrams. Washington resisted.

And all the while, Poland threatened to give Ukraine the Leopards from its own stock — with or without Germany’s permission.

On Wednesday, resistance seemed a thing of the past.

“These tanks are further evidence of our enduring, unflagging commitment to Ukraine and our confidence in the skill of Ukrainian forces,” President Biden declared at the White House.

Hours earlier, after Germany announced that it would send Leopards to Ukraine and allow other nations to send their own, Chancellor Olaf Scholz defended his country’s cautious approach.

“We’re talking about very effective weapons systems here, and it’s proper that we never provide those weapons systems alone, but always in close cooperation,” Mr. Scholz told lawmakers in Parliament.

Ukraine’s president, Volodymyr Zelensky, who had campaigned vigorously for the tanks, embraced the news. He called it “an important step on the path to victory.” But if Ukraine was enjoying a cavalry-is-coming moment, it was clear that it would not be arriving any time soon.

The first Leopard could take months to arrive on the battlefield, and the Abrams a year or longer. The tanks will also number far fewer than the hundreds that Ukraine says it needs to defeat the Russians.

But Germany’s decision to send tanks from its own stores paves the way for a dozen other European countries to send their own — a movement of heavy weaponry that could eventually help Ukrainian forces dent Russia’s advantage in troop numbers and equipment, military experts say.

In all, Kyiv emerged from the agreement with enough tanks for about three new Ukrainian battalions. The United States said it would send 31 Abrams tanks, and Germany said it would send an initial shipment of 14 Leopards.

The announcements were welcomed by Ukraine’s allies.

“At a critical moment in Russia’s war, these can help Ukraine to defend itself, win and prevail as an independent nation,” said Jens Stoltenberg, NATO’s secretary general.

Prime Minister Mateusz Morawiecki of Poland said that the delivery of Leopards was “a big step,” and Britain’s prime minister, Rishi Sunak, said Germany had made the “right decision.”

The news got a much frostier reception from the Kremlin.

Sergey Yuryevitch Nechayev, the Russians ambassador to Germany, said in a statement that Ukraine’s allies had made an “extremely dangerous decision” that “takes the conflict to a new level of confrontation.”

The statement also accused Berlin of abandoning its “historical responsibility to Russia” arising from Nazi aggression in World War II. That history, and the decades of relative pacifism that followed for Germany, played a significant role in its reluctance to send the tanks.

For all the talk of a unified alliance that followed the tank announcements — “Together we are stronger,” Poland’s prime minister trumpeted — in the weeks before the deal was struck, there were signs that the allies might start to go their own way.

“We will not stand idly by and watch Ukraine bleed to death,” Mr. Morawiecki said over the weekend. “Ukraine and Europe will win this war — with or without Germany.”

Legally, Germany has to authorize the transfer of the tanks it made from one country to another, but Poland’s leader insisted that whether Berlin approved or not, Warsaw would build a coalition of nations willing to donate some of Europe’s most advanced weaponry.

Word of the tank agreement came on a day when Ukrainian forces suffered a setback on the battlefield, retreating from the small town of Soledar in the east after weeks of bitter fighting. A military spokesman acknowledged that Ukraine’s withdrawal there brings Russian forces closer to encircling and perhaps capturing the strategic eastern city of Bakhmut.

The spokesman, Col. Sergei Cherevaty, said that the retreat had been ordered “to preserve our personnel.”

With winter set in, fighting in Ukraine has slowed considerably, and many of the decisions being made by Ukrainian officials and their allies now are based on the belief that as spring begins, so will a new phase in the war.

The tanks promised on Wednesday by Berlin and Washington will not be delivered in time to help Ukraine defend towns and cities near Bakhmut, where Russian forces have recently advanced in a grueling ground assault.

Indeed, it may be months before they are deployed.

Moving them into the conflict zone is far from an easy task, and Ukrainian troops still need to be trained to use the powerful Western war machines. The Abrams tank, in particular, is an exceptionally complex machine that is challenging to operate and maintain.

Gen. Robert B. Abrams, a former U.S. Army four-star general who retired in 2021 with decades of experience — the tank is named for his father — echoed other experts’ concerns about logistics. Some Pentagon leaders say it will be difficult for Ukrainian troops to repair and maintain a fleet of the gas-guzzling tanks. And that is after getting them there.

“The time it would take to get there — to be able to build up the supply stockage, to deliver the vehicles, to train the crews, to train the mechanics, to gather everything you’d need — how long would that take?” General Abrams said in an interview. “I don’t know, but it ain’t like 30 days, I can tell you that.”

On Wednesday, when a reporter asked if Germany had forced him to change his mind on the tank, Mr. Biden said: “Germany didn’t force me to change my mind. I wanted to make sure we are all together.”

He also dismissed Moscow’s contention that sending the tanks was an escalation.

“There is no offensive threat to Russia,” Mr. Biden said. “If Russian troops return to Russia, where they belong, this war would be over today.” nytarticle tanksarticle